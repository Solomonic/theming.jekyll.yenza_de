<!doctype html> <html amp lang="en-us"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"> <meta name="description" content="Today we see how we modify our theme to fit our needs and make it AMP ready, how to add structured Data and the Open Graph data for Facebook shares."> <link rel="preload" as="script" href="https://cdn.ampproject.org/v0.js"> <script async src="https://cdn.ampproject.org/v0.js"></script> <style amp-custom>body,h1,h2,h3,h4,h5,h6,p,blockquote,pre,hr,dl,dd,ol,ul,figure{margin:0;padding:0}body{font:400 16px/1.5 Verdana,Geneva,sans-serif;color:#111;background-color:#fdfdfd;-webkit-text-size-adjust:100%;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;font-feature-settings:"kern" 1;font-kerning:normal}h1,h2,h3,h4,h5,h6,p,blockquote,pre,ul,ol,dl,figure,.highlight{margin-bottom:15px}img{max-width:100%;vertical-align:middle}figure>img{display:block}figcaption{font-size:14px}ul,ol{margin-left:30px}li>ul,li>ol{margin-bottom:0}h1,h2,h3,h4,h5,h6{font-weight:400}h1,h2{text-align:center}.site-footer h1,.site-footer h2,.site-footer h3,.site-footer h4,.site-footer h5,.site-footer h6{text-align:left}a{color:#2a7ae2;text-decoration:none}a:visited{color:#1756a9}a:hover{color:#111;text-decoration:underline}blockquote{color:#828282;border-left:4px solid #e8e8e8;padding-left:15px;font-size:18px;letter-spacing:-1px;font-style:italic}blockquote>:last-child{margin-bottom:0}pre,code{font-size:15px;border:1px solid #e8e8e8;border-radius:3px;background-color:#eef}code{padding:1px 5px}pre{padding:8px 12px;overflow-x:auto}pre>code{border:0;padding-right:0;padding-left:0}.wrapper{max-width:740px;margin-right:auto;margin-left:auto;padding-right:30px;padding-left:30px}@media screen and (max-width:800px){.wrapper{max-width:-webkit-calc(800px -(30px));max-width:calc(800px -(30px));padding-right:15px;padding-left:15px}}.footer-col-wrapper:after,.wrapper:after{content:"";display:table;clear:both}.icon>svg{display:inline-block;width:16px;height:16px;vertical-align:middle}.icon>svg path{fill:#828282}.site-header{border-top:5px solid #424242;min-height:56px;position:relative}.site-title{font-size:26px;font-weight:300;letter-spacing:-1px;margin-bottom:0;float:left;text-shadow:-11px 0 50px #fff}.site-title,.site-title:visited{color:#424242}.home-red{color:red;left:4px}.home-yellow{color:gold;left:8px}.home-green{color:green;left:12px}.home-black{color:#000}.slogan{font-size:20px;margin-left:20px;font-style:italic}.site-nav{float:right;line-height:56px}.site-nav .menu-icon{display:none}.site-nav .page-link{color:#111;line-height:1.5}.site-nav .page-link:not(:last-child){margin-right:20px}@media screen and (max-width:600px){.site-nav{position:absolute;top:9px;right:15px;background-color:#fdfdfd;border:1px solid #e8e8e8;border-radius:5px;text-align:right}.site-nav .menu-icon{display:block;float:right;width:36px;height:26px;line-height:0;padding-top:10px;text-align:center}.site-nav .menu-icon>svg{width:18px;height:15px}.site-nav .menu-icon>svg path{fill:#424242}.site-nav .trigger{clear:both;display:none}.site-nav:hover .trigger{display:block;padding-bottom:5px}.site-nav .page-link{display:block;padding:5px 10px;margin-left:20px}.site-nav .page-link:not(:last-child){margin-right:0}}.footer-heading{font-size:18px;margin-bottom:15px}.footer-col-wrapper{font-size:15px;color:#828282;margin-left:-15px}.footer-col{float:left;margin-bottom:15px;padding-left:15px}.footer-col-1,.footer-col-2,.footer-col-3{width:31%}@media screen and (max-width:800px){.footer-col-1,.footer-col-2{width:-webkit-calc(50% -(30px / 2));width:calc(50% -(30px / 2))}.footer-col-3{width:-webkit-calc(100% -(30px / 2));width:calc(100% -(30px / 2))}}@media screen and (max-width:600px){.footer-col{float:none;width:-webkit-calc(100% -(30px / 2));width:calc(100% -(30px / 2))}}.page-content{padding:0}.post-list{margin-left:0;list-style:none}.post-list>li{margin-bottom:30px}.post-meta{font-size:14px;color:#828282}.post-link{display:block;font-size:24px}.post-header{margin-bottom:30px}.post-title{font-size:30px;letter-spacing:-1px;line-height:1}@media screen and (max-width:800px){.post-title{font-size:36px}}.post-content{margin-bottom:30px}.post-content h2{font-size:26px}@media screen and (max-width:800px){.post-content h2{font-size:28px}}.post-content h3{font-size:24px}@media screen and (max-width:800px){.post-content h3{font-size:22px}}.post-content h4{font-size:20px}@media screen and (max-width:800px){.post-content h4{font-size:18px}}.align-up{position:relative;top:-10px}.align-down{position:relative;top:3px}.contact_facebook,.contact_email,.contact_skype_chat,.contact_skype_call{display:inline-block;margin:5px 10px}article h2,.article-section h2{font-size:1.4em}article h3,.article-section h3{font-size:1.3em}article h4,.article-section h4{font-size:1.2em}article h5,.article-section h5{font-size:1.15em}article h6,.article-section h6{display:none}article .article-headline,.article-section .article-headline{margin-bottom:0}article a.post_description,article a.post_description:hover,article a.post_description:active,article a.post_description:link,article a.post_description:visited,.article-section a.post_description,.article-section a.post_description:hover,.article-section a.post_description:active,.article-section a.post_description:link,.article-section a.post_description:visited{color:inherit;text-decoration:none;cursor:help}
article time,.article-section time{font-style:italic;font-weight:bold}article>section{padding:0 1em}.article{width:43%;float:left;border:1px solid #e8e8e8;padding:25px;margin-bottom:15px;border-radius:5px;-webkit-box-shadow:2px 13px 51px -18px rgba(17,17,17,0.45);-moz-box-shadow:2px 13px 51px -18px rgba(17,17,17,0.45);box-shadow:2px 13px 51px -18px rgba(17,17,17,0.45)}html,body{margin:0;padding:0;height:100%;width:100%}#global-wrapper{min-height:100%}.article.even{margin-right:15px}.article.full{width:auto;float:none;clear:both}@media screen and (max-width:600px){.article{width:auto;float:none}.article.even{margin-right:0}}ul.invisible{list-style-type:none;margin-left:5px}ul.invisible li>.fa{margin-right:7px}ul.invisible li{margin-bottom:10px}s.partner_description,.projects_description{position:relative;display:inline-block;padding:10px 15px 5px;margin-bottom:10px;min-height:50px;border-radius:5px;-webkit-box-shadow:2px 13px 51px -18px rgba(17,17,17,0.45);-moz-box-shadow:2px 13px 51px -18px rgba(17,17,17,0.45);box-shadow:2px 13px 51px -18px rgba(17,17,17,0.45)}s.partner_description .post_actions,.projects_description .post_actions{position:absolute;top:5px;left:10px}s.partner_description h1,s.partner_description h2,s.partner_description h3,s.partner_description h4,s.partner_description h5,.projects_description h1,.projects_description h2,.projects_description h3,.projects_description h4,.projects_description h5{display:inline-block;letter-spacing:-1px;float:left;margin:20px 15px 0 0}s.partner_description strong,.projects_description strong{display:inline-block;margin:1.5em 1em 0 0;float:left}.partners,.projects{float:none;clear:both}.partners section,.projects section{display:inline-block}.partners h1,.partners h2,.partners h3,.partners h4,.partners h5,.projects h1,.projects h2,.projects h3,.projects h4,.projects h5{float:none}.center{text-align:center}.series-navigation{width:100%;position:relative;min-height:48px}.series-navigation .prev_article{position:absolute;left:0;diplay:block;height:48px}.series-navigation .next_article{position:absolute;right:0;diplay:block;height:48px}.series-navigation .small-text{display:none}@media screen and (max-width:600px){.prev_article .text,.next_article .text{display:none}.prev_article .small-text,.next_article .small-text{display:inline}}#share-box{position:fixed;top:40%;text-align:center;right:0}#share-box .box{background-color:#fff;display:block;padding:3px 8px;border-radius:5px;min-height:2em;z-index:999}#share-box .box a{font-weight:bold;min-height:2em;display:block}#share-box .box a.green:visited,#share-box .box a.green:active,#share-box .box a.green:focus,#share-box .box a.green:hover{color:green}#share-box .box a.gold:visited,#share-box .box a.gold:active,#share-box .box a.gold:focus,#share-box .box a.gold:hover{color:gold}#share-box .box a.red:visited,#share-box .box a.red:active,#share-box .box a.red:focus,#share-box .box a.red:hover{color:red}pre{white-space:pre-wrap;word-break:break-word}.article-section .article-headline,.article-section h2.article-headline,.article-section h2.post-title{text-align:left;line-height:1.1em;margin-bottom:16px;letter-spacing:-1px;font-size:21px;background-color:transparent;border:0 none transparent}.article-section .article-headline .right,.article-section h2.article-headline .right,.article-section h2.post-title .right{position:absolute;right:0;top:0}.video .thumbnail,.news .thumbnail{float:left;margin-right:12px}.iframe-container{position:relative;width:100%;padding-bottom:56.25%;height:0}.iframe-container iframe{position:absolute;top:0;left:0;width:100%;height:100%}.artist_image,.image_description,.short_bio{text-align:center;font-style:italic}.cover{margin-bottom:1em}#tune_list{text-align:center}.entry{display:inline-block;margin:1em;min-width:200px}.entry .text{display:block}ul.link_list{list-style:none}.quote{font-style:italic}.video_embed{margin-bottom:1em}.section-nav{list-style-type:none}.section-nav li{display:inline-block;margin-left:1em;margin-bottom:.5em}.site-nav{z-index:99}.rasta_blog{margin-top:1em}.rasta_blog h2,.rasta_blog h3{margin-bottom:0}.promo{margin-bottom:1em}.row>.column{padding:0 8px}.row:after{content:"";display:table;clear:both}.column{float:left;width:25%}.modal{display:none;position:fixed;z-index:1;padding-top:100px;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:black}.modal a,.modal a:hover{color:#2a7ae2}.modal .order_info{color:#fff;position:absolute;top:20px;left:25px;font-style:italic;font-weight:lighter;letter-spacing:-1px;width:85%}.modal .more_products{color:#fff;position:absolute;top:40px;left:25px;font-style:italic;font-weight:lighter;letter-spacing:-1px;width:85%}@media screen and (max-width:820px){.modal .more_products{top:65px}}@media screen and (max-width:600px){.modal .more_products{top:800px}}@media screen and (max-width:550px){.modal .more_products{top:720px}}@media screen and (max-width:500px){.modal .more_products{top:665px}}@media screen and (max-width:450px){.modal .more_products{top:605px}
}@media screen and (max-width:400px){.modal .more_products{top:550px}}@media screen and (max-width:350px){.modal .more_products{top:495px}}@media screen and (max-width:300px){.modal .more_products{top:435px}}.modal-content{position:relative;background-color:#fefefe;margin:auto;padding:0;width:90%;max-width:600px;text-align:center}.close{color:white;position:absolute;top:10px;right:25px;font-size:35px;font-weight:bold}.close:hover,.close:focus{color:#999;text-decoration:none;cursor:pointer}.mySlides{display:none}.prev,.next{cursor:pointer;position:absolute;color:black;top:50%;width:auto;padding:16px;margin-top:-50px;font-weight:bold;font-size:20px;border-radius:0 3px 3px 0;user-select:none;-webkit-user-select:none}.next{right:0;border-radius:3px 0 0 3px}.prev{left:0}.prev:hover,.next:hover{background-color:rgba(0,0,0,0.8);color:white;text-decoration:none}.numbertext{color:#000;font-size:12px;padding:8px 12px;position:absolute;top:0}.caption-container{text-align:center;background-color:black;padding:2px 16px;color:white}img.demo{opacity:.6}img.demo.active,.demo:hover{opacity:1}.hover-shadow:hover{box-shadow:0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}.amp_img{margin:1em auto;position:relative;z-index:1}.amp_image{margin:0 auto}.amp_image amp-img{margin:0 auto}.image.amp_image.icon{width:74px}a.site-title{min-width:100px;margin-bottom:1em}.carousel_footer{position:absolute;height:50px;width:100%}.carousel_footer a.buy_now,.carousel_footer a.more_products,.carousel_footer a.large_product{position:absolute;display:block;margin:0;height:50px;font-weight:bold;color:white;text-align:center;cursor:pointer}.carousel_footer .red{background-color:red;right:0;width:33%}.carousel_footer .gold{background-color:gold;left:33%;width:34%}.carousel_footer .green{background-color:green;left:0;width:33%}.music h2,.music h3{margin-top:1em}.highlight{background:#fff}.highlighter-rouge .highlight{background:#eef}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:bold}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:bold;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{color:#458;font-weight:bold}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:#008080}.highlight .nb{color:#0086b3}.highlight .nc{color:#458;font-weight:bold}.highlight .no{color:#008080}.highlight .ni{color:#800080}.highlight .ne{color:#900;font-weight:bold}.highlight .nf{color:#900;font-weight:bold}.highlight .nn{color:#555}.highlight .nt{color:#000080}.highlight .nv{color:#008080}.highlight .ow{font-weight:bold}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc{color:#008080}.highlight .vg{color:#008080}.highlight .vi{color:#008080}.highlight .il{color:#099}</style> <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript> <link rel="canonical" href="https://Rasta.Online/education/software-development/2020/07/31/converting-the-minima-theme-to-serve-amp-pages.html"> <title>High Performance AMP Blog with Jekyll - Part 5</title> <meta content="text/plain" name="DC.format"> <meta content="Jens Krause" name="DC.creator"> <meta content="ALL" name="robots"> <meta content="Global" name="distribution"> <meta content="Global" name="DC.distribution"> <meta content="en" name="DC.language"> <meta property="og:title" content="High Performance AMP Blog with Jekyll - Part 5"/> <meta property="og:site_name" content="Duppy conqueror in the digital jungle."/> <meta property="og:url" content="https://Rasta.Online/education/software-development/2020/07/31/converting-the-minima-theme-to-serve-amp-pages.html"/> <meta property="og:type" content="article"/> <meta property="fb:app_id" content="172683489748870"/> <meta property="og:locale" content="en_US"/> <meta property="og:description" content="Today we see how we modify our theme to fit our needs and make it AMP ready, how to add structured Data and the Open Graph data for Facebook shares."> <meta property="article:author" content="https://www.facebook.com/www.rasta.online"/> <meta property="article:publisher" content="https://www.facebook.com/www.rasta.online"/> <meta property="og:image" content="http://rasta.online/library/images/default.jpg"/> <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://Rasta.Online/education/software-development/2020/07/31/converting-the-minima-theme-to-serve-amp-pages.html"
      },
      "headline": "High Performance AMP Blog with Jekyll - Part 5",
      "image": "https://Rasta.Online/library/images/rasta-logo.png",
      "datePublished": "2020-07-31T06:00:00+00:00",
      "dateModified": "2020-08-21T07:47:33+00:00",
      "author": {
        "@type": "Person",
        "name": "Jens Krause"
      },
      "editor": "Jens Krause",
      "publisher": {
        "@type": "Organization",
        "name": "Rasta Online",
        "logo": {
          "@type": "ImageObject",
          "url": "https://rasta.online/library/images/rasta-logo.png"
        }
      },
      "description": "Today we see how we modify our theme to fit our needs and make it AMP ready, how to add structured Data and the Open Graph data for Facebook shares.",
      "keywords": ["Software Development","Open Source","Free Tools","SEO","Performance","continuous integration","coding","programming"],
      "genre": ["Software Development","Open Source","Free Tools","SEO","Performance","continuous integration","coding","programming"]
        }

    }
    </script> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> <script async custom-element="amp-addthis" src="https://cdn.ampproject.org/v0/amp-addthis-0.1.js"></script> <script async custom-element="amp-image-lightbox" src="https://cdn.ampproject.org/v0/amp-image-lightbox-0.1.js"></script> </head> <body> <div id="global-wrapper"> <header class="site-header"> <div class="wrapper"> <a class="site-title" title="Interested in Rasta, Reggae or creating websites and internet technologies, open-source and team-management?" href="/"> <div class="image amp_image home"><amp-img class="home" src="/library/images/generated/lion_head-99-6136fba54.png" alt="Duppy conqueror in the digital jungle." srcset="/library/images/generated/lion_head-99-6136fba54.webp 99w" width="99" height="99" style="max-width:99px" layout="responsive"><noscript><img class="home" src="/library/images/generated/lion_head-99-6136fba54.png" alt="Duppy conqueror in the digital jungle." srcset="/library/images/generated/lion_head-99-6136fba54.webp 99w" width="99" height="99" style="max-width:99px"></noscript></amp-img> </div> </a> <nav class="site-nav"> <a href="#" class="menu-icon"> <svg viewBox="0 0 18 15"> <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/> <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/> <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/> </svg> </a> <div class="trigger"> <a class="page-link" href="/music">Music</a> <a class="page-link" href="/education">Education</a> <a class="page-link" href="/about">About</a> <a class="page-link" href="/contact">Contact</a> </div> </nav> </div> </header> <div class="page-content"> <div id="top" class="wrapper"> <div class="series-navigation"> <a class="prev_article" title="Read previous article: Automated Testing" href="/education/software-development/2020/07/29/test-the-html-of-the-jekyll-blog.html"><span class="fa fa-angle-double-left fa-lg"></span> <span class="text">Automated Testing</span><span class="small-text">Read previous</span> </a> </div> <article class="post article full"> <header class="post-header"> <h2 class="post-title">High Performance AMP Blog with Jekyll - Part 5</h2> <p class="post-meta"> Jul 31, 2020 • <span>Jens Krause</span> </p> <p> In this series I'll show how to setup a high performance, mobile friendly AMP Blog with custom Jekyll plugins while using GitHub pages as a free hosting provider. We create a staging environment and setup an automatic deploy and testing with Travis CI. </p> </header> <div class="post-content"> <p>Today we have a look how we can modify our website-theme to be customizable and fullfil the requirements to be recognized as a valid AMP Page. We add Structured Data for Googles Rich Results and Open Graph for Facebook shares. </p> <h2 id="the-basics---what-are-we-talking-about-today">The Basics - what are we talking about today?</h2> <h3 id="the-minima-theme">The Minima theme</h3> <p>Per default is our website with the <a href="https://github.com/jekyll/minima">Minima theme</a> which includes a lot of useful features and eliminates the need of writing loads of css codes ourself. We want to stick with the defaults and just change what is needed.</p> <h3 id="the-amp-framework">The AMP framework</h3> <p><a href="https://amp.dev/"><strong>A</strong>ccelerated <strong>M</strong>obile <strong>P</strong>ages</a> is a Google-backed project designed as an open standard to have pages load quickly on mobile devices. It is a web component and html framework that provides a way to create web pages that are fast, smooth-loading and prioritize the user-experience. Besides the speed benefits are AMP Pages prefered by the google search engine, so AMP websites and blogs have an advantage in the search results above non AMP competetors with a similar rank.</p> <h3 id="rich-results">Rich Results</h3> <p><strong>Rich Results</strong> are results in google that appear above the standard results which can contain besides normal text also carousels,images, breadcrumb navigation or corporate contact information and logos. They are designed to highlight key information and are composed of <strong>Rich Snippets</strong> and <strong>Rich Cards</strong>. By providing <strong>Structured Data</strong> on your website, you enable Google to better understand your content which can give you a clear competitive advantage above similar results. Googles <a href="https://search.google.com/test/rich-results">Rich Result Test</a> lets you test your website and is showing that you’ll need a <strong>AMP</strong> site to fully leverage it’s benefits.</p> <h2 id="lets-get-started">Lets get started</h2> <p>To make our Jekyll blog to be recognized as AMP, it will need to meet certain criterias:</p> <p>a) <a href="https://amp.dev/documentation/guides-and-tutorials/learn/spec/amphtml/">AMP HTML</a> markup, which is a subset of conventional HTML</p> <p>b) we need to include some <a href="https://amp.dev/documentation/guides-and-tutorials/start/add_advanced/review_code/">starter code</a></p> <p>c) we are <strong>NOT</strong> allowed to use <strong>external</strong> CSS, but we can use <strong>inline</strong> CSS</p> <p>d) we are <strong>NOT</strong> allowed to use <strong>custom</strong> JavaScript, but we can use <a href="https://amp.dev/documentation/components/">AMP components</a></p> <p>e) we need to use <a href="https://amp.dev/documentation/components/amp-img/">amp-img</a> instead of classic <code class="language-plaintext highlighter-rouge">&lt;img&gt;</code> tags</p> <p>f) we need to use <a href="https://amp.dev/documentation/components/amp-video/">amp-video</a> instead of including them with an <strong>iframe</strong></p> <p>To achieve all this we need to change our theme and Jekyll generation, but it is not as hard as it may seems on first glance.</p> <h2 id="owning-the-theme-for-customisations">Owning the theme for customisations</h2> <p>We need to override the HTML structures provided by the <a href="https://github.com/jekyll/minima">Minima theme</a>. For that we will need to create two new folders in our repository. We create a <code class="language-plaintext highlighter-rouge">_layouts</code> folder, for holding the layout files we want to override and an <code class="language-plaintext highlighter-rouge">_includes</code> folder for the re-usable snippets/ components we are going to use throughout our blog.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites/my-new-website
▶ <span class="nb">mkdir </span>_layouts <span class="o">&amp;&amp;</span> <span class="nb">mkdir </span>_includes
</code></pre></div></div> <p>To be able to override existing files, we will need to import them first into our own project. One easy way to get started is to clone the <a href="https://github.com/jekyll/minima">Minima theme</a> and then move all the files we need over into our website.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites/my-new-website
▶ <span class="nb">cd</span> ..

development/websites 
▶ git clone https://github.com/jekyll/minima.git
</code></pre></div></div> <p>First we copy the <code class="language-plaintext highlighter-rouge">assets</code> and <code class="language-plaintext highlighter-rouge">_sass</code> folders to gain control over the stylesheets</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites 
▶  <span class="nb">cp</span> <span class="nt">-a</span> minima/assets my-new-website/assets

development/websites 
▶  <span class="nb">cp</span> <span class="nt">-a</span> minima/_sass my-new-website/_sass
</code></pre></div></div> <p>Next we copy over the default layout from <code class="language-plaintext highlighter-rouge">_layouts/default.html</code></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites 
▶  <span class="nb">cp </span>minima/_layouts/default.html my-new-website/_layouts/default.html
</code></pre></div></div> <p>And last but not least <code class="language-plaintext highlighter-rouge">_includes/head.html</code></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites 
▶  <span class="nb">cp  </span>minima/_includes/head.html my-new-website/_includes/head.html
</code></pre></div></div> <p>When we now build our blog, we see that one file named <code class="language-plaintext highlighter-rouge">'custom-head.html</code> is missing, which is referenced in <code class="language-plaintext highlighter-rouge">_layouts/default.html</code></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites/my-new-website
▶ bundler <span class="nb">exec </span>jekyll build            
Configuration file: development/websites/my-new-website/_config.yml
            Source: development/websites/my-new-website
       Destination: development/websites/my-new-website/docs
 Incremental build: disabled. Enable with <span class="nt">--incremental</span>
      Generating... 
       Jekyll Feed: Generating feed <span class="k">for </span>posts
  Liquid Exception: Could not locate the included file <span class="s1">'custom-head.html'</span> <span class="k">in </span>any of <span class="o">[</span><span class="s2">"development/websites/my-new-website/_includes"</span>, <span class="s2">"/Library/Ruby/Gems/2.6.0/gems/minima-2.5.1/_includes"</span><span class="o">]</span><span class="nb">.</span> Ensure it exists <span class="k">in </span>one of those directories and, <span class="k">if </span>it is a symlink, does not point outside your site source. <span class="k">in </span>development/websites/my-new-website/_layouts/default.html
</code></pre></div></div> <p>To fix this error we open <code class="language-plaintext highlighter-rouge">_includes/head.html</code> (which is included in <code class="language-plaintext highlighter-rouge">_layouts/default.html</code>) and remove it, since we don’t need it for our purpose.</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
# _includes/head.html
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span> <span class="na">content=</span><span class="s">"IE=edge"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
  {%- seo -%}
  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"{{ "</span><span class="err">/</span><span class="na">assets</span><span class="err">/</span><span class="na">css</span><span class="err">/</span><span class="na">style.css</span><span class="err">"</span> <span class="err">|</span> <span class="na">relative_url</span> <span class="err">}}"</span><span class="nt">&gt;</span>
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}  
<span class="nt">&lt;/head&gt;</span>

</code></pre></div></div> <p>Serving the page right now should be error free and our blog should look exactly as before.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites/my-new-website
▶ bundler <span class="nb">exec </span>jekyll serve <span class="nt">--baseurl</span> <span class="s2">""</span>
Configuration file: development/websites/my-new-website/_config.yml
            Source: development/websites/my-new-website
       Destination: development/websites/my-new-website/docs
 Incremental build: disabled. Enable with <span class="nt">--incremental</span>
      Generating... 
       Jekyll Feed: Generating feed <span class="k">for </span>posts
Jekyll Picture Tag Warning: flag.png is smaller than the requested fallback width of 800px. Using 775 px instead.
Jekyll Picture Tag Warning: flag.png
is 775px wide <span class="o">(</span>after cropping, <span class="k">if </span>applicable<span class="o">)</span>,
smaller than at least one size <span class="k">in </span>the <span class="nb">set</span> <span class="o">[</span>400, 600, 800, 1000].
Will not enlarge.
                    <span class="k">done in </span>0.291 seconds.
 Auto-regeneration: enabled <span class="k">for</span> <span class="s1">'development/websites/my-new-website'</span>
    Server address: http://127.0.0.1:4000/
  Server running... press ctrl-c to stop.
</code></pre></div></div> <div class="image amp_image cover"><amp-img class="cover" src="/library/images/generated/jekyll-amp/display-flag-600-ef603c595.png" alt="Checking on localhost" srcset="/library/images/generated/jekyll-amp/display-flag-600-ef603c595.png 1.0x" width="600" height="611" style="max-width:600px" layout="responsive"><noscript><img class="cover" src="/library/images/generated/jekyll-amp/display-flag-600-ef603c595.png" alt="Checking on localhost" srcset="/library/images/generated/jekyll-amp/display-flag-600-ef603c595.png 1.0x" width="600" height="611" style="max-width:600px"/></noscript></amp-img> </div> <h2 id="adding-the-amp-html-markup">Adding the AMP HTML markup</h2> <p>The next thing we have to do is to declare that we are going to serve an AMP page. For doing this we go to <code class="language-plaintext highlighter-rouge">_layouts/default.html</code> and replace</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"{{ page.lang | default: site.lang | default: "</span><span class="na">en</span><span class="err">"</span> <span class="err">}}"</span><span class="nt">&gt;</span>

</code></pre></div></div> <p>with</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">amp</span> <span class="na">lang=</span><span class="s">"{{ page.lang | default: site.lang | default: "</span><span class="na">en</span><span class="err">"</span> <span class="err">}}</span><span class="nt">&gt;</span>

</code></pre></div></div> <p>Now we open <code class="language-plaintext highlighter-rouge">_includes/head.html</code> and add this content</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;script </span><span class="na">async</span> <span class="na">src=</span><span class="s">"https://cdn.ampproject.org/v0.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  {%- seo -%}
  <span class="nt">&lt;style </span><span class="na">amp-custom</span><span class="nt">&gt;</span>
      <span class="p">{</span><span class="err">%</span> <span class="err">capture</span> <span class="err">styles</span> <span class="err">%</span><span class="p">}</span>
        <span class="p">{</span><span class="err">%</span> <span class="err">include</span> <span class="err">style.scss</span> <span class="err">%</span><span class="p">}</span>
      <span class="p">{</span><span class="err">%</span> <span class="err">endcapture</span> <span class="err">%</span><span class="p">}</span>
      <span class="p">{</span><span class="err">{</span> <span class="err">styles</span> <span class="err">|</span> <span class="err">scssify</span> <span class="p">}</span><span class="err">}</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;style </span><span class="na">amp-boilerplate</span><span class="nt">&gt;body</span><span class="p">{</span><span class="nl">-webkit-animation</span><span class="p">:</span><span class="n">-amp-start</span> <span class="m">8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="m">0s</span> <span class="m">1</span> <span class="nb">normal</span> <span class="nb">both</span><span class="p">;</span><span class="nl">-moz-animation</span><span class="p">:</span><span class="n">-amp-start</span> <span class="m">8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="m">0s</span> <span class="m">1</span> <span class="nb">normal</span> <span class="nb">both</span><span class="p">;</span><span class="nl">-ms-animation</span><span class="p">:</span><span class="n">-amp-start</span> <span class="m">8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="m">0s</span> <span class="m">1</span> <span class="nb">normal</span> <span class="nb">both</span><span class="p">;</span><span class="nl">animation</span><span class="p">:</span><span class="n">-amp-start</span> <span class="m">8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="m">0s</span> <span class="m">1</span> <span class="nb">normal</span> <span class="nb">both</span><span class="p">}</span><span class="k">@-webkit-keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="k">@-moz-keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="k">@-ms-keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="k">@-o-keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="k">@keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="nt">&lt;/style&gt;&lt;noscript&gt;&lt;style </span><span class="na">amp-boilerplate</span><span class="nt">&gt;body</span><span class="p">{</span><span class="nl">-webkit-animation</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span><span class="nl">-moz-animation</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span><span class="nl">-ms-animation</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span><span class="nl">animation</span><span class="p">:</span><span class="nb">none</span><span class="p">}</span><span class="nt">&lt;/style&gt;&lt;/noscript&gt;</span>
  {%- feed_meta -%}
  {%- if jekyll.environment == 'production' and site.google_analytics -%}
    {%- include google-analytics.html -%}
  {%- endif -%}
  
<span class="nt">&lt;/head&gt;</span>

</code></pre></div></div> <p>We are adding here the required AMP JavaScript library and <a href="https://amp.dev/documentation/guides-and-tutorials/learn/spec/amp-boilerplate/?format=websites">AMP Boilerplate</a>. For more details please have a look at the <a href="https://amp.dev/documentation/guides-and-tutorials/start/create/basic_markup/?format=websites">AMP Basic markup guide</a>.</p> <p>To render our CSS style <strong>inline</strong> in the header as required, we also include our <code class="language-plaintext highlighter-rouge">style.scss</code> file within <code class="language-plaintext highlighter-rouge">&lt;style amp-custom&gt;</code> instead of using a <code class="language-plaintext highlighter-rouge">&lt;link&gt;</code> as usual.</p> <h3 id="including-the-styles-inline-in-the-header">Including the styles inline in the header</h3> <p>To be able to include our style, we have to move them to <code class="language-plaintext highlighter-rouge">_includes/styles.scss</code> and remove the frontmatter dashes in <code class="language-plaintext highlighter-rouge">styles.css</code></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@import
  "minima/skins/classic",
  "minima/initialize";
</code></pre></div></div> <p>We don’t need the <code class="language-plaintext highlighter-rouge">assets/css/style.scss</code> anymore, so you can delete it.</p> <p>Serving Jekyll should not trigger an breaking error, the site should look exactly the same as before, but the <strong>Page Source</strong> should reveal our changes.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites/my-new-website
▶ bundler <span class="nb">exec </span>jekyll serve <span class="nt">--baseurl</span> <span class="s2">""</span>
Configuration file: development/websites/my-new-website/_config.yml
            Source: development/websites/my-new-website
       Destination: development/websites/my-new-website/docs
 Incremental build: disabled. Enable with <span class="nt">--incremental</span>
      Generating... 
       Jekyll Feed: Generating feed <span class="k">for </span>posts
Jekyll Picture Tag Warning: flag.png is smaller than the requested fallback width of 800px. Using 775 px instead.
Jekyll Picture Tag Warning: flag.png
is 775px wide <span class="o">(</span>after cropping, <span class="k">if </span>applicable<span class="o">)</span>,
smaller than at least one size <span class="k">in </span>the <span class="nb">set</span> <span class="o">[</span>400, 600, 800, 1000].
Will not enlarge.
                    <span class="k">done in </span>0.314 seconds.
 Auto-regeneration: enabled <span class="k">for</span> <span class="s1">'development/websites/my-new-website'</span>
    Server address: http://127.0.0.1:4000/
  Server running... press ctrl-c to stop.
</code></pre></div></div> <div class="image amp_image cover"><amp-img class="cover" src="/library/images/generated/jekyll-amp/display-flag-600-ef603c595.png" alt="Checking on localhost" srcset="/library/images/generated/jekyll-amp/display-flag-600-ef603c595.png 1.0x" width="600" height="611" style="max-width:600px" layout="responsive"><noscript><img class="cover" src="/library/images/generated/jekyll-amp/display-flag-600-ef603c595.png" alt="Checking on localhost" srcset="/library/images/generated/jekyll-amp/display-flag-600-ef603c595.png 1.0x" width="600" height="611" style="max-width:600px"/></noscript></amp-img> </div> <p>That looks good and the <strong>Page Source</strong> should be similar to</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">amp</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;&lt;head&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script </span><span class="na">async</span> <span class="na">src=</span><span class="s">"https://cdn.ampproject.org/v0.js"</span><span class="nt">&gt;&lt;/script&gt;</span><span class="c">&lt;!-- Begin Jekyll SEO tag v2.6.1 --&gt;</span>
<span class="nt">&lt;title&gt;</span>Your awesome title | Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"generator"</span> <span class="na">content=</span><span class="s">"Jekyll v4.1.1"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:title"</span> <span class="na">content=</span><span class="s">"Your awesome title"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:locale"</span> <span class="na">content=</span><span class="s">"en_US"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"description"</span> <span class="na">content=</span><span class="s">"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description."</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:description"</span> <span class="na">content=</span><span class="s">"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description."</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"canonical"</span> <span class="na">href=</span><span class="s">"http://localhost:4000/"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:url"</span> <span class="na">content=</span><span class="s">"http://localhost:4000/"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:site_name"</span> <span class="na">content=</span><span class="s">"Your awesome title"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"application/ld+json"</span><span class="nt">&gt;</span>
<span class="p">{</span><span class="dl">"</span><span class="s2">headline</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">Your awesome title</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">http://localhost:4000/</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">Your awesome title</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">@type</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">WebSite</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">@context</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">https://schema.org</span><span class="dl">"</span><span class="p">}</span><span class="nt">&lt;/script&gt;</span>
<span class="c">&lt;!-- End Jekyll SEO tag --&gt;</span>
<span class="nt">&lt;style </span><span class="na">amp-custom</span><span class="nt">&gt;</span>
      
      <span class="nc">.highlight</span> <span class="nc">.c</span> <span class="p">{</span> <span class="nl">color</span><span class="p">:</span> <span class="m">#998</span><span class="p">;</span> <span class="nl">font-style</span><span class="p">:</span> <span class="nb">italic</span><span class="p">;</span> <span class="p">}</span>

<span class="nc">.highlight</span> <span class="nc">.err</span> <span class="p">{</span> <span class="nl">color</span><span class="p">:</span> <span class="m">#a61717</span><span class="p">;</span> <span class="nl">background-color</span><span class="p">:</span> <span class="m">#e3d2d2</span><span class="p">;</span> <span class="p">}</span>
<span class="o">...</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;style </span><span class="na">amp-boilerplate</span><span class="nt">&gt;body</span><span class="p">{</span><span class="nl">-webkit-animation</span><span class="p">:</span><span class="n">-amp-start</span> <span class="m">8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="m">0s</span> <span class="m">1</span> <span class="nb">normal</span> <span class="nb">both</span><span class="p">;</span><span class="nl">-moz-animation</span><span class="p">:</span><span class="n">-amp-start</span> <span class="m">8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="m">0s</span> <span class="m">1</span> <span class="nb">normal</span> <span class="nb">both</span><span class="p">;</span><span class="nl">-ms-animation</span><span class="p">:</span><span class="n">-amp-start</span> <span class="m">8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="m">0s</span> <span class="m">1</span> <span class="nb">normal</span> <span class="nb">both</span><span class="p">;</span><span class="nl">animation</span><span class="p">:</span><span class="n">-amp-start</span> <span class="m">8s</span> <span class="n">steps</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="m">0s</span> <span class="m">1</span> <span class="nb">normal</span> <span class="nb">both</span><span class="p">}</span><span class="k">@-webkit-keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="k">@-moz-keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="k">@-ms-keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="k">@-o-keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="k">@keyframes</span> <span class="n">-amp-start</span><span class="p">{</span><span class="nt">from</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">hidden</span><span class="p">}</span><span class="nt">to</span><span class="p">{</span><span class="nl">visibility</span><span class="p">:</span><span class="nb">visible</span><span class="p">}}</span><span class="nt">&lt;/style&gt;&lt;noscript&gt;&lt;style </span><span class="na">amp-boilerplate</span><span class="nt">&gt;body</span><span class="p">{</span><span class="nl">-webkit-animation</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span><span class="nl">-moz-animation</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span><span class="nl">-ms-animation</span><span class="p">:</span><span class="nb">none</span><span class="p">;</span><span class="nl">animation</span><span class="p">:</span><span class="nb">none</span><span class="p">}</span><span class="nt">&lt;/style&gt;&lt;/noscript&gt;&lt;link</span> <span class="na">type=</span><span class="s">"application/atom+xml"</span> <span class="na">rel=</span><span class="s">"alternate"</span> <span class="na">href=</span><span class="s">"http://localhost:4000/feed.xml"</span> <span class="na">title=</span><span class="s">"Your awesome title"</span> <span class="nt">/&gt;&lt;/head&gt;</span>
...
</code></pre></div></div> <h2 id="validating-our-results">Validating our Results</h2> <p>So did we actually made a valid AMP page? Let’s check with an <a href="https://validator.ampproject.org/">AMP Validator</a> and paste our <strong>Page Source</strong> in.</p> <div class="image amp_image cover"><amp-img class="cover" src="/library/images/generated/jekyll-amp/validator-issues-600-bbe7a55d0.png" alt="AMP Validator issues" srcset="/library/images/generated/jekyll-amp/validator-issues-600-bbe7a55d0.png 1.0x" width="600" height="407" style="max-width:600px" layout="responsive"><noscript><img class="cover" src="/library/images/generated/jekyll-amp/validator-issues-600-bbe7a55d0.png" alt="AMP Validator issues" srcset="/library/images/generated/jekyll-amp/validator-issues-600-bbe7a55d0.png 1.0x" width="600" height="407" style="max-width:600px"/></noscript></amp-img> </div> <p>Oh no, we have two issues to fix. One the one hand is our image not wrapped into a <code class="language-plaintext highlighter-rouge">&lt;amp-img&gt;</code> yet and on the other hand do we have an invalid attribute in the footer.</p> <h3 id="fixing-the-issues">Fixing the issues</h3> <p>For now we are going to remove the image from <code class="language-plaintext highlighter-rouge">index.markdown</code> since we have an in-depth look into amp-images in the follow up article.</p> <p>The invalid <code class="language-plaintext highlighter-rouge">url</code> attribute for the microdata is actually an <a href="https://github.com/jekyll/minima/issues/211">known bug with Minima</a>, so we are going to remove this as well. To do that we copy <code class="language-plaintext highlighter-rouge">_includes/footer.html</code> from the <strong>Minima Theme</strong> into our <code class="language-plaintext highlighter-rouge">includes</code> folder to make it customizable</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites/my-new-website
▶ <span class="nb">cp</span> ../minima/_includes/footer.html _includes/footer.html
</code></pre></div></div> <p>and then simply delete the line <code class="language-plaintext highlighter-rouge">&lt;data class="u-url" href="{{ "/" | relative_url }}"&gt;&lt;/data&gt;</code></p> <p>Validating again with <a href="https://validator.ampproject.org/">AMP Validator</a> now shows that we are passing the test.</p> <h2 id="rich-results-1">Rich Results</h2> <p>One of our main reason of switching to an AMP project is that we want to be eligible for Googles Rich Results. If we are heading to the <a href="https://search.google.com/test/rich-results">Rich Result Test</a> and paste our <strong>Page Source</strong> in, we see that our blog is error free, but is <strong>NOT</strong> eligible for Rich Result. The problem is that we don’t submit enough <a href="https://developers.google.com/search/docs/guides/intro-structured-data">Structured Data</a> to qualify. The preinstalled SEO Plugin provides some, but not enough.</p> <h2 id="structured-data-social-shares-and-opengraph">Structured Data, Social Shares and Opengraph</h2> <p>Besides Google do other social media platforms as <strong>Facebook</strong> and <strong>Twitter</strong> require special markup to share posts feature rich, most notably with the <a href="https://ogp.me/">Open Graph protocol</a>. We are going to solve this issues by providing a custom solution which fits our needs a little better then the out-of-the-box solution.</p> <h3 id="create-the-social-media-header-data">Create the Social Media Header Data</h3> <p>We are going to include the file <a href="https://github.com/Solomonic/my-new-website/blob/master/_includes/seo_tags.html">seo_tags</a> into our projects <code class="language-plaintext highlighter-rouge">includes</code> folder. It renders all the needed <code class="language-plaintext highlighter-rouge">&lt;meta /&gt;</code> properties for <strong>Open Graph</strong> and <strong>Twitter</strong> and is based on the <a href="https://github.com/jekyll/jekyll-seo-tag/blob/master/lib/template.html">original jekyll_seo_tag template</a>, just better in regards of <strong>Structured data</strong>.</p> <p>The key component for this is this section:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"application/ld+json"</span><span class="nt">&gt;</span>
    <span class="p">{</span>
      <span class="dl">"</span><span class="s2">@context</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http://schema.org</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">@type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BlogPosting</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">mainEntityOfPage</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">@type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">WebPage</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">@id</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{page_url}}</span><span class="dl">"</span>
      <span class="p">},</span>
      <span class="dl">"</span><span class="s2">headline</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{page_title}}</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{page_image}}</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">datePublished</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{publish_date}}</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">dateModified</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{modified_date}}</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">author</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">@type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Person</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{page_author}}</span><span class="dl">"</span>
      <span class="p">},</span>
      <span class="dl">"</span><span class="s2">editor</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{page_author}}</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">publisher</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">@type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Organization</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">{{ site.title}}</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">logo</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">@type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ImageObject</span><span class="dl">"</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">url</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{site.logo}}</span><span class="dl">"</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">{{description}}</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">keywords</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">{{keywords | join: '</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">'}}</span><span class="dl">"</span><span class="p">],</span>
      <span class="dl">"</span><span class="s2">genre</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">{{keywords | join: '</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">'}}</span><span class="dl">"</span><span class="p">]</span>
        <span class="p">}</span>

    <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>

</code></pre></div></div> <h3 id="the-data">The Data</h3> <p>To work properly you want to extend your <code class="language-plaintext highlighter-rouge">_config.yml</code> to have the following new properties</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>author: Your Name
keywords: [Blogging, Jekyll, GitHub Pages, free hosting, open source]
logo: https://rasta.online/library/images/rasta-logo.png
</code></pre></div></div> <p>These values are used to give additional information about your website and Posts and are the fallback for the same properties used on a Page or Post. For each Post you now can specify in <a href="https://jekyllrb.com/docs/front-matter/">Front Matter</a> a specific author, a list of keywords and a preview images that shows when people share your content.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: post
title: Blogging Like a Hacker
author: John Doe
keywords: [Unique Topic, Special, delicious food]
image: http://path/to/social/share/preview.png
---
</code></pre></div></div> <p>If you are mostly publishing alone, you may don’t want to repeat yourself alot, so if you don’t specify this on a Post, the site defaults are used instead. You also can define <a href="https://jekyllrb.com/docs/step-by-step/09-collections/#front-matter-defaults">Front Matter Defaults</a> in your <code class="language-plaintext highlighter-rouge">_config.yml</code> to get even more control over the used values</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>defaults:
  -
    scope:
      path: ""
      type: "posts"
    values:
      author: Your Name
      image: https://social/share/default.png
</code></pre></div></div> <h3 id="replace-the-default-seo-header">Replace the default SEO header</h3> <p>In <code class="language-plaintext highlighter-rouge">_includes/head.html</code> you now have to replace <code class="language-plaintext highlighter-rouge">{%- seo -%}</code> with:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
{% capture seo %}{% include seo_tags.html %}{%endcapture%}
  {{ seo | split: " " | join: " "}}

</code></pre></div></div> <p>You also could use a simpler <code class="language-plaintext highlighter-rouge">{% include seo_tags.html %}</code> but this way you’ll loose a lot of unneeded whitespaces, so you decreases the size of the generated HTML.</p> <h2 id="deploy-the-changes">Deploy the changes</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>development/websites/my-new-website
▶ git add <span class="nb">.</span> <span class="o">&amp;&amp;</span> git commit <span class="nt">-m</span><span class="s2">"convert page to AMP, add Social share meta data and Structured data for Rich results"</span> <span class="o">&amp;&amp;</span> git push
...
development/websites/my-new-website
▶ git tag <span class="nt">-a</span> 1.1.0 <span class="nt">-m</span><span class="s2">"converting to AMP"</span> <span class="o">&amp;&amp;</span> git push origin <span class="nt">--tags</span>
</code></pre></div></div> <h2 id="validating-the-results">Validating the results</h2> <p>After the Build and deploy is done we want to check what we got so far so we check our website again with <a href="https://search.google.com/test/rich-results">Rich Result Test</a>.</p> <div class="image amp_image cover"><amp-img class="cover" src="/library/images/generated/jekyll-amp/rich-result-1-600-8c04e525f.png" alt="Rich Result Test passed" srcset="/library/images/generated/jekyll-amp/rich-result-1-600-8c04e525f.png 1.0x" width="600" height="183" style="max-width:600px" layout="responsive"><noscript><img class="cover" src="/library/images/generated/jekyll-amp/rich-result-1-600-8c04e525f.png" alt="Rich Result Test passed" srcset="/library/images/generated/jekyll-amp/rich-result-1-600-8c04e525f.png 1.0x" width="600" height="183" style="max-width:600px"/></noscript></amp-img> </div> <div class="image amp_image logo"><amp-img class="logo" src="/library/images/generated/jekyll-amp/rich-result-2-340-f2654737d.png" alt="Rich Results" srcset="/library/images/generated/jekyll-amp/rich-result-2-400-f2654737d.webp 400w, /library/images/generated/jekyll-amp/rich-result-2-600-f2654737d.webp 600w, /library/images/generated/jekyll-amp/rich-result-2-758-f2654737d.webp 758w" width="340" height="673" style="max-width:340px" layout="responsive"><noscript><img class="logo" src="/library/images/generated/jekyll-amp/rich-result-2-340-f2654737d.png" alt="Rich Results" srcset="/library/images/generated/jekyll-amp/rich-result-2-400-f2654737d.webp 400w, /library/images/generated/jekyll-amp/rich-result-2-600-f2654737d.webp 600w, /library/images/generated/jekyll-amp/rich-result-2-758-f2654737d.webp 758w" width="340" height="673" style="max-width:340px"/></noscript></amp-img> </div> <p>Great, that worked well!</p> <p>But is our website <strong>fast</strong>? After all are we using an free hosting provider. Let’s check with Googles <a href="https://developers.google.com/speed/pagespeed/insights">Pagespeed Insights</a></p> <div class="image amp_image logo"><amp-img class="logo" src="/library/images/generated/jekyll-amp/pagespeed-insight-340-a0edb2c2e.png" alt="Rich Results" srcset="/library/images/generated/jekyll-amp/pagespeed-insight-400-a0edb2c2e.webp 400w, /library/images/generated/jekyll-amp/pagespeed-insight-600-a0edb2c2e.webp 600w, /library/images/generated/jekyll-amp/pagespeed-insight-800-a0edb2c2e.webp 800w, /library/images/generated/jekyll-amp/pagespeed-insight-1000-a0edb2c2e.webp 1000w" width="340" height="235" style="max-width:340px" layout="responsive"><noscript><img class="logo" src="/library/images/generated/jekyll-amp/pagespeed-insight-340-a0edb2c2e.png" alt="Rich Results" srcset="/library/images/generated/jekyll-amp/pagespeed-insight-400-a0edb2c2e.webp 400w, /library/images/generated/jekyll-amp/pagespeed-insight-600-a0edb2c2e.webp 600w, /library/images/generated/jekyll-amp/pagespeed-insight-800-a0edb2c2e.webp 800w, /library/images/generated/jekyll-amp/pagespeed-insight-1000-a0edb2c2e.webp 1000w" width="340" height="235" style="max-width:340px"/></noscript></amp-img> </div> <p>Yes, we are!</p> <h2 id="conclusion">Conclusion</h2> <p>We’ve done it! We finally got the setup for a high performance AMP Blog with Rich Results for free. We get automated testing and deployment with Travis CI and can use any helpful Jekyll plugin.</p> <p>In the next articles we have a look at how to configure our AMP images, how to use <a href="https://amp.dev/documentation/components/">AMP components</a> to get a feature rich site and finally how to connect a CMS connected to get a better user experience when creating content.</p> </div> </article> <div class="series-navigation"> <a class="prev_article" title="Read previous article: Automated Testing" href="/education/software-development/2020/07/29/test-the-html-of-the-jekyll-blog.html"><span class="fa fa-angle-double-left fa-lg"></span> <span class="text">Automated Testing</span><span class="small-text">Read previous</span> </a> </div> </div> </div> <footer class="site-footer"> <div class="wrapper"> <div class="footer-col-wrapper"> <div class="footer-col footer-col-1"> <h3>Rasta abroad</h3> <ul class="invisible"> <li><a href="https://RapidAgileSoftware.github.io" target="_blank" title="Rapid Agile Software"><span class="fa fa-lg fa-file-o"></span> Rapid Agile Software</a></li> <li><a href="https://github.com/RapidAgileSoftware" target="_blank" title="Follow a Rasta on github.com"><span class="fa fa-lg fa-github"></span> GitHub</a></li> <li><a target="_blank" href="https://www.linkedin.com/in/jens-krause-2a88901a6"><span class="fa fa-linkedin-square"></span><span class="footer_link_text"> LinkedIn</span></a></li> </ul> </div> <div class="footer-col footer-col-2"> <h3>Contact</h3> <ul class="invisible"> <li><a href="https://RapidAgileSoftware.github.io/contact"><span aria-hidden="true" title="Contact form" aria-label="conact form" class="fa fa-align-justify"></span> Contact form</a></li> <li><a href="mailto:info@rasta.online"><span aria-hidden="true" title="Email" aria-label="Email" class="fa fa-envelope"></span> Email</a></li> <li><a href="https://instagram.com/ras.yen" target="_blank" title="Follow a Rasta on Instagram"><span class="fa fa-lg fa-instagram"></span> Instagram</a></li> </ul> </div> <div class="footer-col footer-col-3"> <h3>QuickLinks</h3> <ul> <li><a class="page-link" href="/about/">About</a></li> <li><a class="page-link" href="/contact/">Contact</a></li> <li><a class="page-link" href="/education/">Education</a></li> <li><a class="page-link" href="/music/">Music</a></li> </ul> </div> </div> <div class="footer-col-wrapper"> <div class="footer-col footer-col-1"> <a href="#top"><span aria-hidden="true" title="Scroll to top" aria-label="Scroll to top" class="fa fa-arrow-circle-o-up fa-lg"></span> Back to top</a> </div> <div class="footer-col footer-col-2"> <a href="/sitemap.xml"><span class="fa fa-sitemap fa-lg" aria-hidden="true" title="to Sitemap" aria-label="to Sitemap"></span> Sitemap</a> </div> <div id="colophone" class="footer-col footer-col-3"> <a href="/"><span class="fa fa-copyright"> 2002-2020</span> All rights reserved. </a> </div> </div> </div> </footer> </div> <amp-addthis width="320" height="92" layout="responsive" data-pub-id="ra-5f169cc41ce343c5" data-widget-id="qrtb" data-widget-type="floating"></amp-addthis> </body> </html>